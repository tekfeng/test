<div class='row'>
  <div class='col-lg-12'>
    <div class="row wrapper border-bottom white-bg page-heading">
      <div class="col-lg-10">
        <h2>Vendors</h2>
        <ol class="breadcrumb">
          <li>
            <a href="/dashboard">Home</a>
          </li>
          <li class="active">
            <strong>Vendors Listing</strong>
          </li>
        </ol>
      </div>
    </div>
    
    <div class='wrapper wrapper-content'>
      <div class='ibox'>
        <div class="ibox-title">
          <h5>Vendors Listing</h5>                      
        </div>
        <div class='ibox-content'>
          
          <div class="clearfix">
            <div id="vendor_filter">
              <% @vendor_new = Vendor.new %>
              <% @vendor_new.vendor_category_id = params[:vendor_categopry_id].to_i if  params[:vendor_categopry_id] %>
              <%= semantic_form_for @vendor_new,  :url => "", :html => {:method => :get }  do |f| %>
                <%= f.inputs do %>
                  <%= f.input :vendor_category_id, :as => :select, placeholder: 'user@domain.com', collection: VendorCategory.all %>
                  <%= f.input :city_id, :label => "Select City", :as => :select, collection: City.all %>
                <% end %>
                 <%= f.action :submit, :label => "Filter", :button_html => { :class => "btn btn-primary filter-style" } %>
              <% end %>
            </div>
          </div>
          
          <div class='clearfix'>
            <%= link_to 'Add New', new_vendor_url, class: "btn btn-primary pull-right" %>
          </div>
          
          <br/>
          <table class='listing-table vendor-listing-content'>
            <thead>
              <tr>
                <th>No.</th>
                <th>Name</th>
                <th>Vendor Type</th>
                <th>Email</th>
                <th>Contact</th>
                <th>Fax</th>
                <th>City</th>
                <th colspan='2' style='text-align: center;'>Action</th>
              </tr>
            </thead>        
            <tbody>
              <% @vendors.each_with_index do |vendor, index| %>
                <tr class="<%= cycle('odd', 'even') %>">
                  <td><%= index + 1 %></td>
                  <td><%= vendor.name.html_safe %></td>
                  <td><%= vendor.vendor_type %></td>
                  <td><%= vendor.email %></td>
                  <td><%= vendor.contact %></td>
                  <td><%= vendor.fax %></td>
                  <td><%= vendor.city ? vendor.city.name : "N/A" %></td>
                  
                  <td style='text-align: center;'>
                    <%= link_to "More Details", "/vendors/#{vendor.id}/more_details", class: 'btn btn-blue' %>
                  </td>
                  
                  <td style='text-align: center;'>
                    <%= link_to "Edit", edit_vendor_url(vendor), class: 'btn edit-btn' %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <br/ >
        </div>
      </div>
    </div>
  </div>
</div>
  
<script language="javascript">
  $(document).ready(function() {
    $("select#vendor_vendor_category_id").selectbox();
    $("select#vendor_city_id").selectbox();
  });  
</script>

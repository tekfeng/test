<div class='row'>
  <div class='col-lg-12'>
    <div class="row wrapper border-bottom white-bg page-heading">
      <div class="col-lg-10">
        <h2>Bookings</h2>
        <ol class="breadcrumb">
          <li>
            <a href="/dashboard">Home</a>
          </li>
          <li class="active">
            <strong>Bookings</strong>
          </li>
        </ol>
      </div>
    </div>
    
    <div class='wrapper wrapper-content'>
      <div class='ibox'>
        
        <div class='ibox-content'>
          
          <div class="clearfix">
            <div id="vendor_filter">
              <% @booking_new = Booking.new %>
              <%= semantic_form_for @booking_new,  :url => "", :html => {:method => :get }  do |f| %>
                <%= f.inputs do %>
                  <%= f.input :status, :label => "Payment Status", :as => :select, placeholder: 'user@domain.com', collection: Booking.all.collect(&:status) %>
                  <%= f.input :user_id, :label => "Sales Person", :as => :select, collection: User.all %>
                  <%= f.input :travel_date,:as => :string, :input_html => { :class => 'input-icon-select-date'} %>
                  <%= f.input :travel_to,:as => :string, :input_html => { :class => 'input-icon-select-date'} %>
                <% end %>
                 <%= f.action :submit, :label => "Filter", :button_html => { :class => "btn btn-primary filter-booking" } %>
              <% end %>
            </div>
          </div>
          
          
          <div class='clearfix'>
            <%= link_to 'Add New', new_booking_url, class: "btn btn-primary pull-right" %>
          </div>
          
          <br/>
          <table class='listing-table vendor-listing-content-tab-vendor-rates'>
            <thead>
              <tr>
                <th>No.</th>
                <th>Booking Number</th>
                <th>Travel Date</th>
                <th>Booking Date</th>
                <th>Name</th>
                <th>Tour Code</th>
                <th>Status</th>
                <th>Sales Person</th>
                <th>Itinerary</th>
              </tr>
            </thead>        
            <tbody>
              <% @bookings.each_with_index do |booking, index| %>
                <tr class="<%= cycle('odd', 'even') %>">
                  <td><%=  index + 1 %></td>
                  <td><%= booking.booking_number %></td>
                  <td><%= booking.travel_date ? booking.travel_date.strftime("%d-%m-%Y") : "" %></td>
                  <td><%= booking.created_at.strftime("%d-%m-%Y") %></td>
                  <td><%= booking.customer.try(:name) %></td>
                  <td><%= booking.booking_tour_category_tours.first.tour.try(:code) %></td>
                  <td><%= booking.status %></td>
                  <td><%= booking.user.try(:username) %></td>              
                                
                  <td style='text-align: center;'>
                    <%= link_to "Send", "/bookings/#{booking.id}/send", class: 'btn btn-primary' %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <br/ >
        </div>
      </div>
    </div>
  </div>
</div>

   

<script language="javascript">
  $(document).ready(function() {
    
    $('#booking_travel_date').datetimepicker({
      timepicker: false,
      format:'d-m-Y',
    }); 
    
    
    $('#booking_travel_to').datetimepicker({
      timepicker: false,
      format:'d-m-Y',
    }); 
    
    
    $("select#booking_status").selectbox();
    $("select#booking_user_id").selectbox();
  });  
</script>
